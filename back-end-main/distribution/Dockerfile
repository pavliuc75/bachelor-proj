FROM openjdk:17-jdk
COPY ./target/dependency/*.jar /

ARG DATABASE_NAME
ARG KEYCLOAK_AUTHSERVERURL
ARG KEYCLOAK_CREDENTIALS_SECRET
ARG KEYCLOAK_REALM
ARG KEYCLOAK_RESOURCE
ARG MONGO_DB_URL

ENV DATABASE_NAME $DATABASE_NAME
ENV KEYCLOAK_AUTHSERVERURL $KEYCLOAK_AUTHSERVERURL
ENV KEYCLOAK_CREDENTIALS_SECRET $KEYCLOAK_CREDENTIALS_SECRET
ENV KEYCLOAK_REALM $KEYCLOAK_REALM
ENV KEYCLOAK_RESOURCE $KEYCLOAK_RESOURCE
ENV MONGO_DB_URL $MONGO_DB_URL

CMD java -jar /back-end-bloom.jar